<div class="max-w-site mx-auto flex flex-col gap-5 lg:flex-row">
  {{! Find first non-live post for main position, or use first post if none found }}
  {{#assign "mainPostFound" false}}{{/assign}}
  {{#assign "mainPostIndex" 0}}{{/assign}}
  
  {{#foreach posts limit="6"}}
    {{#unless (has tag="live")}}
      {{#unless mainPostFound}}
        {{> cards/post-card-vertical-main 
          card_class="flex-2 pb-5 border-b border-brd-soft lg:pb-0 lg:border-b-0 lg:pr-5 lg:border-r"
          image_loading="eager"
        }}
        {{#assign "mainPostFound" true}}{{/assign}}
        {{#assign "mainPostIndex" @index}}{{/assign}}
      {{/unless}}
    {{/unless}}
  {{/foreach}}
  
  {{! Fallback: if no non-live post found, use the first post }}
  {{#unless mainPostFound}}
    {{#foreach posts to="1"}}
      {{> cards/post-card-vertical-main 
        card_class="flex-2 pb-5 border-b border-brd-soft lg:pb-0 lg:border-b-0 lg:pr-5 lg:border-r"
        image_loading="eager"
      }}
      {{#assign "mainPostIndex" @index}}{{/assign}}
    {{/foreach}}
  {{/unless}}
  
  <div class="flex-1 flex flex-col gap-8 md:grid md:grid-cols-2 lg:flex lg:flex-col lg:gap-6">  
    {{! Show remaining posts, skipping the one used for main }}
    {{#foreach posts from="1" to="6"}}
      {{#unless (compare @index "==" mainPostIndex)}}
        {{> cards/post-card-horizontal-sm
          card_class="not-last-of-type:border-b border-brd-soft not-last-of-type:pb-6"
          image_loading="eager"
        }}
      {{/unless}}
    {{/foreach}}
  </div>
</div>